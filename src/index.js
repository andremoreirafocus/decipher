var conv = require('convert-hex')

var ciphertextStrHumanReadable = "0x43 0x6e 0x65 0x6e 0x6f 0x72 0x61 0x66 0x21 0x20 0x46 0x72 0x20 0x69 0x70 0x20 0x72 0x66 0x67 0x6e 0x20 0x79 0x72 0x61 0x71 0x62 0x20 0x72 0x66 0x66 0x6e 0x20 0x7a 0x72 0x61 0x66 0x6e 0x74 0x72 0x7a 0x20 0x72 0x75 0x20 0x63 0x62 0x65 0x64 0x68 0x72 0x20 0x70 0x62 0x61 0x66 0x72 0x74 0x68 0x76 0x68 0x20 0x71 0x72 0x70 0x62 0x71 0x76 0x73 0x76 0x70 0x6e 0x65 0x20 0x6e 0x20 0x70 0x76 0x73 0x65 0x6e 0x2e 0x20 0x4e 0x20 0x66 0x72 0x61 0x75 0x6e 0x20 0x63 0x6e 0x65 0x6e 0x20 0x62 0x20 0x6e 0x65 0x64 0x68 0x76 0x69 0x62 0x20 0x65 0x6e 0x65 0x20 0x72 0x75 0x20 0x6e 0x20 0x63 0x6e 0x79 0x6e 0x69 0x65 0x6e 0x20 0x6e 0x61 0x78 0x76 0x20 0x65 0x72 0x63 0x72 0x67 0x76 0x71 0x6e 0x20 0x62 0x20 0x61 0x68 0x7a 0x72 0x65 0x62 0x20 0x71 0x72 0x20 0x71 0x72 0x66 0x79 0x62 0x70 0x6e 0x7a 0x72 0x61 0x67 0x62 0x66 0x20 0x71 0x6e 0x20 0x70 0x76 0x73 0x65 0x6e 0x20 0x71 0x72 0x20 0x70 0x72 0x66 0x6e 0x65 0x2e 0x20 0x52 0x6b 0x2e 0x20 0x66 0x72 0x20 0x6e 0x20 0x70 0x75 0x6e 0x69 0x72 0x20 0x73 0x62 0x65 0x20 0x33 0x2c 0x20 0x69 0x70 0x20 0x71 0x72 0x69 0x72 0x65 0x6e 0x20 0x72 0x66 0x70 0x65 0x72 0x69 0x72 0x65 0x20 0x6e 0x20 0x63 0x6e 0x79 0x6e 0x69 0x6e 0x20 0x6e 0x61 0x78 0x76 0x20 0x33 0x20 0x69 0x72 0x6d 0x72 0x66 0x20 0x72 0x7a 0x20 0x66 0x72 0x64 0x68 0x72 0x61 0x70 0x76 0x6e 0x20 0x72 0x2e 0x74 0x2e 0x20 0x6e 0x61 0x78 0x76 0x6e 0x61 0x78 0x76 0x6e 0x61 0x78 0x76"
console.log('Texto a ser cifrado em hexadecimal:')
console.log(ciphertextStrHumanReadable);
var cipherTextHex = ciphertextStrHumanReadable.replace(/ /g,'').replace(/0x/g,'');
// console.log(cipherTextHex);

function transform (inStr) {
  // const inChars = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];
  const inChars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
  const outChars = ['n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 
                    'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',
                    'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
                    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M'];

  var outStr = '';
  for ( n = 0; n < inStr.length; n++ ) {
    indexCharToConvert = inChars.indexOf(inStr[n])
    if (indexCharToConvert !== -1)
      outStr += outChars[indexCharToConvert];
    else
      outStr += inStr[n];
  }
  // console.log(outStr);
  return outStr;
}


// var cipherTextHex = "436e656e" //"0x" prefix is optional
var valuesStr = conv.hexToBytes(cipherTextHex);
// console.dir(valuesStr);
var cyphertext = valuesStr.reduce((acc, value) => acc + String.fromCharCode(parseInt(value)), '');
console.log('\nTexto cifrado:')
console.log(cyphertext);
console.log('\nTexto decifrado:')
console.log(transform(cyphertext));
